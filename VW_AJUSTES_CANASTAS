/****** Object:  View [dbo].[VW_AJUSTES_CANASTAS]    Script Date: 02/08/2022 11:30:21 p.Â m. ******/
SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO



CREATE VIEW [dbo].[VW_AJUSTES_CANASTAS]
AS
SELECT        dbo.P_CANASTA_MOV.CODIGO_CANASTA_MOV, dbo.P_CANASTA_MOV.FECHA_MOV AS FECHA_AJUSTE, 
              ISNULL(dbo.P_CLIENTE.CODIGO + ' - ' + dbo.P_CLIENTE.NOMBRE,'') AS CLIENTE,
              ISNULL(dbo.P_RUTA.CODIGO + ' ' + dbo.P_RUTA.NOMBRE,'') AS RUTA, dbo.P_CANASTA_MOV.CANTIDAD_INICIAL, 
			  dbo.P_CANASTA_MOV.PESO_INICIAL, dbo.P_CANASTA_MOV.CANTIDAD_AJUSTE_POSITIVO, dbo.P_CANASTA_MOV.PESO_AJUSTE_POSITIVO, 
			  dbo.P_CANASTA_MOV.CANTIDAD_AJUSTE_NEGATIVO, dbo.P_CANASTA_MOV.PESO_AJUSTE_NEGATIVO, dbo.P_CANASTA_MOV.USUARIO, 
			  dbo.P_CANASTA_RAZON_AJUSTE.NOMBRE AS RAZON_AJUSTE, dbo.P_CANASTA_MOV_DET.DESCRIPCION, 
			  dbo.P_CANASTA_TIPO_DOCUMENTO.ID_TIPO_DOCUMENTO, dbo.P_CANASTA_TIPO_DOCUMENTO.CODIGO AS TIPO_AJUSTE, 
			  ISNULL(P_CLIENTE.SUCURSAL,'')  AS SUCCLIENTE, ISNULL(P_RUTA.SUCURSAL,'') AS SUCRUTA
FROM          dbo.P_CANASTA_MOV INNER JOIN
              dbo.P_CANASTA_MOV_DET ON dbo.P_CANASTA_MOV.CODIGO_CANASTA_MOV = dbo.P_CANASTA_MOV_DET.CODIGO_CANASTA_MOV INNER JOIN
              dbo.P_CANASTA_RAZON_AJUSTE ON dbo.P_CANASTA_MOV_DET.CODIGO_RAZON_AJUSTE = dbo.P_CANASTA_RAZON_AJUSTE.CODIGO_RAZON_AJUSTE INNER JOIN
              dbo.P_CANASTA_TIPO_DOCUMENTO ON dbo.P_CANASTA_MOV.ID_TIPO_DOCUMENTO = dbo.P_CANASTA_TIPO_DOCUMENTO.ID_TIPO_DOCUMENTO LEFT OUTER JOIN
			  dbo.P_CLIENTE ON dbo.P_CLIENTE.CODIGO = dbo.P_CANASTA_MOV.CLIENTE LEFT OUTER JOIN
			  dbo.P_RUTA ON dbo.P_RUTA.CODIGO = dbo.P_CANASTA_MOV.RUTA
GO
